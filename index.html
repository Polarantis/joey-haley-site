<!-- /index.html — Landing page only -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Joey Haley — Archive</title>
  <meta name="description" content="A curated archive for Canadian artist Joey Haley. Minimalist portfolio with selected paintings and comics." />
  <link rel="icon" href="/favicon.svg" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">Joey Haley</div>
      <nav aria-label="Primary">
        <ul>
          <li><a href="/" aria-current="page">Home</a></li>
          <li><a href="/gallery/">Gallery</a></li>
          <li><a href="/bio/">Bio</a></li>
          <li><a href="/contact/">Contact</a></li>
        </ul>
      </nav>
    </header>

    <section class="intro" aria-labelledby="intro-title">
      <h1 id="intro-title">A curated archive</h1>
      <p>A minimalist, permanent home for the work of Canadian artist Joey Haley (paintings and comics). Selected pieces appear below; explore the full gallery for the complete catalog.</p>
      <div class="row">
        <a class="cta" href="#preview">Preview</a>
        <a class="cta" href="/gallery/">View full gallery</a>
      </div>
    </section>

    <section id="preview" class="hero" aria-labelledby="featured-title">
      <h2 id="featured-title" class="sr-only">Featured works</h2>
      <!-- Tiles are populated by inline data or an API call -->
      <a class="tile" href="#" data-href="/gallery/untitled-vermilion-field/">
        <figure>
          <img src="https://cdn.example.r2/images/paintings/untitled-vermilion-field_1600.jpg" alt="Abstract red field with sharp black geometry" loading="eager" decoding="async">
        </figure>
        <div class="cap">Untitled (Vermilion Field) · 2016</div>
      </a>
      <a class="tile" href="#" data-href="/gallery/window-four-panels/">
        <figure>
          <img src="https://cdn.example.r2/images/comics/window-four-panels_1600.jpg" alt="Four-panel comic with stark lines and negative space" loading="lazy" decoding="async">
        </figure>
        <div class="cap">Window, Four Panels · 2014</div>
      </a>
      <a class="tile" href="#" data-href="/gallery/northern-light-3/">
        <figure>
          <img src="https://cdn.example.r2/images/paintings/northern-light-3_1600.jpg" alt="Cool gradients with a hard-edged diagonal" loading="lazy" decoding="async">
        </figure>
        <div class="cap">Northern Light #3 · 2013</div>
      </a>
    </section>

    <!-- Image Modal -->
    <div class="modal" id="imageModal" role="dialog" aria-labelledby="modal-title" aria-hidden="true">
      <button class="modal-close" id="modalClose" aria-label="Close modal">&times;</button>
      <button class="modal-nav modal-prev" id="modalPrev" aria-label="Previous image">&#8249;</button>
      <button class="modal-nav modal-next" id="modalNext" aria-label="Next image">&#8250;</button>
      <div class="modal-content">
        <img class="modal-image" id="modalImage" alt="" />
      </div>
      <div class="modal-info">
        <span class="modal-title" id="modalTitle"></span>
        <a class="modal-fullres" id="modalFullRes" target="_blank" rel="noopener">View full resolution</a>
      </div>
    </div>

    <footer>
      <nav class="sitemap" aria-label="Footer">
        <a href="/">Home</a>
        <a href="/gallery/">Gallery</a>
        <a href="/bio/">Bio</a>
        <a href="/contact/">Contact</a>
      </nav>
      <p style="color:var(--muted); margin-top:12px">© <span id="year"></span> Joey Haley. All rights reserved.</p>
    </footer>
  </div>

  <script>
    let featuredImages = [];
    let currentImageIndex = 0;

    // Set current year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Modal elements
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const modalTitle = document.getElementById('modalTitle');
    const modalFullRes = document.getElementById('modalFullRes');
    const modalClose = document.getElementById('modalClose');
    const modalPrev = document.getElementById('modalPrev');
    const modalNext = document.getElementById('modalNext');

    // Format image title from filename or caption
    function formatTitle(caption) {
      return caption.replace(' · ', ' - ');
    }

    // Get full resolution URL (extract filename from current URL)
    function getFullResUrl(currentUrl) {
      const filename = currentUrl.split('/').pop();
      return `https://cdn.joeyhaleyart.com/${filename}`;
    }

    // Extract image data from tiles
    function initializeFeaturedImages() {
      const tiles = document.querySelectorAll('.tile');
      featuredImages = Array.from(tiles).map(tile => {
        const img = tile.querySelector('img');
        const cap = tile.querySelector('.cap');
        return {
          url: img.src,
          title: cap ? cap.textContent : img.alt,
          alt: img.alt
        };
      });
    }

    // Open modal with image
    function openModal(imageIndex) {
      currentImageIndex = imageIndex;
      const image = featuredImages[currentImageIndex];
      
      modalImage.src = image.url;
      modalImage.alt = image.alt;
      modalTitle.textContent = formatTitle(image.title);
      modalFullRes.href = getFullResUrl(image.url);
      
      modal.classList.add('active');
      modal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      
      // Focus management
      modalClose.focus();
    }

    // Close modal
    function closeModal() {
      modal.classList.remove('active');
      modal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    // Navigate to previous image
    function prevImage() {
      currentImageIndex = (currentImageIndex - 1 + featuredImages.length) % featuredImages.length;
      openModal(currentImageIndex);
    }

    // Navigate to next image
    function nextImage() {
      currentImageIndex = (currentImageIndex + 1) % featuredImages.length;
      openModal(currentImageIndex);
    }

    // Event listeners for modal
    modalClose.addEventListener('click', closeModal);
    modalPrev.addEventListener('click', prevImage);
    modalNext.addEventListener('click', nextImage);

    // Close modal on background click
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (!modal.classList.contains('active')) return;
      
      switch(e.key) {
        case 'Escape':
          closeModal();
          break;
        case 'ArrowLeft':
          prevImage();
          break;
        case 'ArrowRight':
          nextImage();
          break;
      }
    });

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
      initializeFeaturedImages();
      
      // Make tiles clickable for modal instead of navigation
      document.querySelectorAll('.tile').forEach((tile, index) => {
        tile.style.cursor = 'pointer';
        tile.addEventListener('click', (e) => {
          e.preventDefault();
          openModal(index);
        });
        
        // Remove href attributes to prevent navigation
        tile.removeAttribute('href');
        tile.removeAttribute('data-href');
      });
    });
  </script>
</body>
</html>
